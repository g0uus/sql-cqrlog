-- Count unique 4-character gridsquares from QSO locations (loc field)
-- Extracts the first 4 characters from the locator field

SELECT band,COUNT(DISTINCT SUBSTRING(loc, 1, 4)) AS gridsquares
FROM view_cqrlog_main_by_qsodate
WHERE
    loc IS NOT NULL
    AND loc != ''
GROUP BY band
ORDER BY band ASC;